!function(){function a(){g.font="36pt Impact",g.textAlign="center",g.fillStyle="white",g.strokeStyle="black",g.lineWidth=3}function b(a,b,c,d){var e=a,f=b,g=1;return c=c||n,d=d||o,(a>c||b>d)&&(a===b?(e=c,f=d):a>b?(g=c/a,e=c,f=Math.floor(b*g)):(g=d/b,f=d,e=Math.floor(a*g))),{width:Math.round(e),height:Math.round(f)}}function c(c,d,e){c=c||h;var i=d||j.value,l=e||k.value,m=b(c.width,c.height);f.width=m.width,f.height=m.height,a(),g.drawImage(c,0,0,f.width,f.height),g.textBaseline="top",g.fillText(i,f.width/2,0),g.strokeText(i,f.width/2,0),g.textBaseline="bottom",g.fillText(l,f.width/2,f.height),g.strokeText(l,f.width/2,f.height)}function d(){var a=l.files[0],b=new FileReader;a&&b.readAsDataURL(a),b.onloadend=function(){h.src=b.result}}function e(a){var b=document.getElementsByClassName("alert").length;if(0===b){var c=document.createElement("div");c.className="note",c.textContent=a,document.body.appendChild(c),c.addEventListener("animationend",function(){document.body.removeChild(c)})}}var f=document.querySelector("#canvas"),g=f.getContext("2d"),h=new Image,i=document.querySelector("#form"),j=document.querySelector("#top"),k=document.querySelector("#bottom"),l=document.querySelector("#fileInput"),m="image.jpg",n=500,o=500;h.src=m,f.width=n,f.height=o,h.addEventListener("load",function(){c(h)}),h.addEventListener("error",function(){h.src=m,e("Oops, that image won't work. Showing default instead.")}),i.addEventListener("input",function(a){c(h)},!1),l.addEventListener("change",function(){d()},!1)}();