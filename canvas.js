!function(){function a(){f.font="36pt Impact",f.textAlign="center",f.fillStyle="white",f.strokeStyle="black",f.lineWidth=3}function b(a,b,c,d){var e=a,f=b,g=1;return c=c||m,d=d||n,(a>c||b>d)&&(a===b?(e=c,f=d):a>b?(g=c/a,e=c,f=Math.floor(b*g)):(g=d/b,f=d,e=Math.floor(a*g))),{width:Math.round(e),height:Math.round(f)}}function c(c,d,h){c=c||g;var k=d||i.value,l=h||j.value,m=b(c.width,c.height);e.width=m.width,e.height=m.height,a(),f.drawImage(c,0,0,e.width,e.height),f.textBaseline="top",f.fillText(k,e.width/2,0),f.strokeText(k,e.width/2,0),f.textBaseline="bottom",f.fillText(l,e.width/2,e.height),f.strokeText(l,e.width/2,e.height)}function d(){var a=k.files[0],b=new FileReader;a&&b.readAsDataURL(a),b.onloadend=function(){g.src=b.result}}var e=document.querySelector("#canvas"),f=e.getContext("2d"),g=new Image,h=document.querySelector("#form"),i=document.querySelector("#top"),j=document.querySelector("#bottom"),k=document.querySelector("#fileInput"),l="image.jpg",m=500,n=500;g.src=l,e.width=m,e.height=n,g.addEventListener("load",function(){c(g)}),g.onerror=function(){g.src=l},h.addEventListener("input",function(a){c(g)},!1),k.addEventListener("change",function(){d()},!1)}();